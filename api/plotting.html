<!DOCTYPE html>

<html class="writer-html5" data-content_root="../" lang="en">
<head>
<meta charset="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Plotting — PyhDToolkit 1.5.0 documentation</title>
<link href="../_static/pygments.css?v=fa44fd50" rel="stylesheet" type="text/css"/>
<link href="../_static/css/theme.css?v=19f00094" rel="stylesheet" type="text/css"/>
<link href="../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
<link href="../_static/plot_directive.css" rel="stylesheet" type="text/css"/>
<link href="../_static/sphinx-codeautolink.css?v=125d5c1c" rel="stylesheet" type="text/css"/>
<link href="../_static/sg_gallery.css?v=d2d258e8" rel="stylesheet" type="text/css"/>
<link href="../_static/sg_gallery-binder.css?v=f4aeca0c" rel="stylesheet" type="text/css"/>
<link href="../_static/sg_gallery-dataframe.css?v=2082cf3c" rel="stylesheet" type="text/css"/>
<link href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" rel="stylesheet" type="text/css"/>
<link href="../_static/sphinx-design.min.css?v=87e54e7c" rel="stylesheet" type="text/css"/>
<link href="../_static/css/custom.css?v=0a86e678" rel="stylesheet" type="text/css"/>
<!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
<script src="../_static/jquery.js?v=5d32c60e"></script>
<script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
<script src="../_static/documentation_options.js?v=e0a75244"></script>
<script src="../_static/doctools.js?v=9a2dae69"></script>
<script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
<script src="../_static/clipboard.min.js?v=a7894cd8"></script>
<script src="../_static/copybutton.js?v=f281be69"></script>
<script src="../_static/design-tabs.js?v=f930bc37"></script>
<script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="../_static/js/theme.js"></script>
<link href="../genindex.html" rel="index" title="Index"/>
<link href="../search.html" rel="search" title="Search"/>
<link href="utils.html" rel="next" title="Utils"/>
<link href="optics.html" rel="prev" title="Optics"/>
</head>
<body class="wy-body-for-nav">
<div class="wy-grid-for-nav">
<nav class="wy-nav-side" data-toggle="wy-nav-shift">
<div class="wy-side-scroll">
<div class="wy-side-nav-search">
<a href="../index.html">
</a>
<div class="version">
                1.5.0
              </div>
<div role="search">
<form action="../search.html" class="wy-form" id="rtd-search-form" method="get">
<input aria-label="Search docs" name="q" placeholder="Search docs" type="text"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
</div>
</div><div aria-label="Navigation menu" class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#using-with-docker">Using With Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#minutes-to-pyhdtoolkit">5 Minutes to PyhDToolkit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#cpymadtools">Cpymadtools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#plotting">Plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#utilities">Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../quickstart.html#additional-helpers">Additional Helpers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_machine_survey.html">Machine Survey</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_tune_diagram.html">Tune Diagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_lhc_crossing_schemes.html">LHC Crossing Schemes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_aperture.html">Accelerator Aperture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_sbs_plotting.html">Segment-by-Segment Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_ir_errors.html">LHC IR Errors Assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_track_spectra.html">Free Tracking Spectrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_lattice.html">Accelerator Lattice</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_acd_tracking_spectra.html">AC Dipole Driven Tracking Spectrum</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_phase_space.html">Phase Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_beam_enveloppe.html">Beam Enveloppe</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_stats_fitting.html">Distributions Fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_lhc_setup.html">Quick LHC Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_lhc_setup.html#preparing-the-lhc-setups">Preparing the LHC setups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_lhc_setup.html#as-a-context-manager">As a context manager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../gallery/demo_lhc_rigid_waist_shift.html">LHC Rigid Waist Shift</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_lhc_rigid_waist_shift.html#showcasing-the-waist-shift">Showcasing the Waist Shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_lhc_rigid_waist_shift.html#determining-the-waist-shift">Determining the Waist Shift</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gallery/demo_lhc_rigid_waist_shift.html#seeing-the-effect-through-values-of-the-knob">Seeing the effect through values of the knob</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="cpymadtools.html">Cpymadtools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#useful-constants">Useful Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#betatron-coupling-utilities">Betatron Coupling Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.coupling.get_closest_tune_approach"><code class="docutils literal notranslate"><span class="pre">get_closest_tune_approach()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.coupling.get_cminus_from_coupling_rdts"><code class="docutils literal notranslate"><span class="pre">get_cminus_from_coupling_rdts()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.coupling.get_coupling_rdts"><code class="docutils literal notranslate"><span class="pre">get_coupling_rdts()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.coupling.match_no_coupling_through_ripkens"><code class="docutils literal notranslate"><span class="pre">match_no_coupling_through_ripkens()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#lhc-specific-utilities">LHC-Specific Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._coupling.correct_lhc_global_coupling"><code class="docutils literal notranslate"><span class="pre">correct_lhc_global_coupling()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._coupling.get_lhc_bpms_twiss_and_rdts"><code class="docutils literal notranslate"><span class="pre">get_lhc_bpms_twiss_and_rdts()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._elements.add_markers_around_lhc_ip"><code class="docutils literal notranslate"><span class="pre">add_markers_around_lhc_ip()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._elements.install_ac_dipole_as_kicker"><code class="docutils literal notranslate"><span class="pre">install_ac_dipole_as_kicker()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._elements.install_ac_dipole_as_matrix"><code class="docutils literal notranslate"><span class="pre">install_ac_dipole_as_matrix()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._errors.misalign_lhc_ir_quadrupoles"><code class="docutils literal notranslate"><span class="pre">misalign_lhc_ir_quadrupoles()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._errors.misalign_lhc_triplets"><code class="docutils literal notranslate"><span class="pre">misalign_lhc_triplets()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._misc.get_lhc_bpms_list"><code class="docutils literal notranslate"><span class="pre">get_lhc_bpms_list()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._misc.get_lhc_tune_and_chroma_knobs"><code class="docutils literal notranslate"><span class="pre">get_lhc_tune_and_chroma_knobs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._misc.get_sizes_at_ip"><code class="docutils literal notranslate"><span class="pre">get_sizes_at_ip()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._misc.make_sixtrack_output"><code class="docutils literal notranslate"><span class="pre">make_sixtrack_output()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._misc.reset_lhc_bump_flags"><code class="docutils literal notranslate"><span class="pre">reset_lhc_bump_flags()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.apply_lhc_colinearity_knob"><code class="docutils literal notranslate"><span class="pre">apply_lhc_colinearity_knob()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.apply_lhc_colinearity_knob_delta"><code class="docutils literal notranslate"><span class="pre">apply_lhc_colinearity_knob_delta()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.apply_lhc_coupling_knob"><code class="docutils literal notranslate"><span class="pre">apply_lhc_coupling_knob()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.apply_lhc_rigidity_waist_shift_knob"><code class="docutils literal notranslate"><span class="pre">apply_lhc_rigidity_waist_shift_knob()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.carry_colinearity_knob_over"><code class="docutils literal notranslate"><span class="pre">carry_colinearity_knob_over()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.deactivate_lhc_arc_sextupoles"><code class="docutils literal notranslate"><span class="pre">deactivate_lhc_arc_sextupoles()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.power_landau_octupoles"><code class="docutils literal notranslate"><span class="pre">power_landau_octupoles()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.switch_magnetic_errors"><code class="docutils literal notranslate"><span class="pre">switch_magnetic_errors()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._powering.vary_independent_ir_quadrupoles"><code class="docutils literal notranslate"><span class="pre">vary_independent_ir_quadrupoles()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._queries.get_current_orbit_setup"><code class="docutils literal notranslate"><span class="pre">get_current_orbit_setup()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._queries.get_magnets_powering"><code class="docutils literal notranslate"><span class="pre">get_magnets_powering()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._queries.query_arc_correctors_powering"><code class="docutils literal notranslate"><span class="pre">query_arc_correctors_powering()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._queries.query_triplet_correctors_powering"><code class="docutils literal notranslate"><span class="pre">query_triplet_correctors_powering()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._routines.correct_lhc_global_coupling"><code class="docutils literal notranslate"><span class="pre">correct_lhc_global_coupling()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._routines.correct_lhc_orbit"><code class="docutils literal notranslate"><span class="pre">correct_lhc_orbit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._routines.do_kmodulation"><code class="docutils literal notranslate"><span class="pre">do_kmodulation()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._setup.LHCSetup"><code class="docutils literal notranslate"><span class="pre">LHCSetup</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._setup.lhc_orbit_variables"><code class="docutils literal notranslate"><span class="pre">lhc_orbit_variables()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._setup.make_lhc_beams"><code class="docutils literal notranslate"><span class="pre">make_lhc_beams()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._setup.make_lhc_thin"><code class="docutils literal notranslate"><span class="pre">make_lhc_thin()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._setup.prepare_lhc_run2"><code class="docutils literal notranslate"><span class="pre">prepare_lhc_run2()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._setup.prepare_lhc_run3"><code class="docutils literal notranslate"><span class="pre">prepare_lhc_run3()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._setup.re_cycle_sequence"><code class="docutils literal notranslate"><span class="pre">re_cycle_sequence()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._setup.setup_lhc_orbit"><code class="docutils literal notranslate"><span class="pre">setup_lhc_orbit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._twiss.get_ips_twiss"><code class="docutils literal notranslate"><span class="pre">get_ips_twiss()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.lhc._twiss.get_ir_twiss"><code class="docutils literal notranslate"><span class="pre">get_ir_twiss()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#matching-routines">Matching Routines</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.matching.match_chromaticities"><code class="docutils literal notranslate"><span class="pre">match_chromaticities()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.matching.match_tunes"><code class="docutils literal notranslate"><span class="pre">match_tunes()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.matching.match_tunes_and_chromaticities"><code class="docutils literal notranslate"><span class="pre">match_tunes_and_chromaticities()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#parameters">Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.parameters.query_beam_attributes"><code class="docutils literal notranslate"><span class="pre">query_beam_attributes()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#ptc-routines">PTC Routines</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.ptc.get_amplitude_detuning"><code class="docutils literal notranslate"><span class="pre">get_amplitude_detuning()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.ptc.get_rdts"><code class="docutils literal notranslate"><span class="pre">get_rdts()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.ptc.ptc_track_particle"><code class="docutils literal notranslate"><span class="pre">ptc_track_particle()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.ptc.ptc_twiss"><code class="docutils literal notranslate"><span class="pre">ptc_twiss()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#tracking-routines">Tracking Routines</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.track.track_single_particle"><code class="docutils literal notranslate"><span class="pre">track_single_particle()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#tune-utilities">Tune Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.tune.get_footprint_lines"><code class="docutils literal notranslate"><span class="pre">get_footprint_lines()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.tune.get_footprint_patches"><code class="docutils literal notranslate"><span class="pre">get_footprint_patches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.tune.make_footprint_table"><code class="docutils literal notranslate"><span class="pre">make_footprint_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#twiss-routines">TWISS Routines</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.twiss.get_pattern_twiss"><code class="docutils literal notranslate"><span class="pre">get_pattern_twiss()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.twiss.get_twiss_tfs"><code class="docutils literal notranslate"><span class="pre">get_twiss_tfs()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#miscellaneous-utilities">Miscellaneous Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.utils.export_madx_table"><code class="docutils literal notranslate"><span class="pre">export_madx_table()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="cpymadtools.html#pyhdtoolkit.cpymadtools.utils.get_table_tfs"><code class="docutils literal notranslate"><span class="pre">get_table_tfs()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="maths.html">Maths</a><ul>
<li class="toctree-l3"><a class="reference internal" href="maths.html#stats-fitting">Stats Fitting</a></li>
<li class="toctree-l3"><a class="reference internal" href="maths.html#pyhdtoolkit.maths.stats_fitting.best_fit_distribution"><code class="docutils literal notranslate"><span class="pre">best_fit_distribution()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="maths.html#pyhdtoolkit.maths.stats_fitting.make_pdf"><code class="docutils literal notranslate"><span class="pre">make_pdf()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="maths.html#pyhdtoolkit.maths.stats_fitting.set_distributions_dict"><code class="docutils literal notranslate"><span class="pre">set_distributions_dict()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="maths.html#utilities">Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="maths.html#pyhdtoolkit.maths.utils.get_magnitude"><code class="docutils literal notranslate"><span class="pre">get_magnitude()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="maths.html#pyhdtoolkit.maths.utils.get_scaled_values_and_magnitude_string"><code class="docutils literal notranslate"><span class="pre">get_scaled_values_and_magnitude_string()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Models</a><ul>
<li class="toctree-l3"><a class="reference internal" href="models.html#particle-beam-models">Particle Beam Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html#pyhdtoolkit.models.beam.BeamParameters"><code class="docutils literal notranslate"><span class="pre">BeamParameters</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html#htcondor-models">HTCondor Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html#pyhdtoolkit.models.htc.BaseSummary"><code class="docutils literal notranslate"><span class="pre">BaseSummary</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html#pyhdtoolkit.models.htc.ClusterSummary"><code class="docutils literal notranslate"><span class="pre">ClusterSummary</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html#pyhdtoolkit.models.htc.HTCTaskSummary"><code class="docutils literal notranslate"><span class="pre">HTCTaskSummary</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html#mad-x-models">MAD-X Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html#pyhdtoolkit.models.madx.MADXBeam"><code class="docutils literal notranslate"><span class="pre">MADXBeam</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html#pyhdtoolkit.models.madx.ParticleEnum"><code class="docutils literal notranslate"><span class="pre">ParticleEnum</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="optics.html">Optics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="optics.html#beam-optics">Beam Optics</a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#pyhdtoolkit.optics.beam.Beam"><code class="docutils literal notranslate"><span class="pre">Beam</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#pyhdtoolkit.optics.beam.compute_beam_parameters"><code class="docutils literal notranslate"><span class="pre">compute_beam_parameters()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#resonance-driving-terms-utilities">Resonance Driving Terms Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#pyhdtoolkit.optics.rdt.determine_rdt_line"><code class="docutils literal notranslate"><span class="pre">determine_rdt_line()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#pyhdtoolkit.optics.rdt.rdt_to_order_and_type"><code class="docutils literal notranslate"><span class="pre">rdt_to_order_and_type()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#ripken-parameters">Ripken Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#pyhdtoolkit.optics.ripken.lebedev_beam_size"><code class="docutils literal notranslate"><span class="pre">lebedev_beam_size()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#twiss-optics">Twiss Optics</a></li>
<li class="toctree-l3"><a class="reference internal" href="optics.html#pyhdtoolkit.optics.twiss.courant_snyder_transform"><code class="docutils literal notranslate"><span class="pre">courant_snyder_transform()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Plotting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#plotting-styles">Plotting Styles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.styles.install_mpl_styles"><code class="docutils literal notranslate"><span class="pre">install_mpl_styles()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#paper-styles">Paper Styles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#thesis-styles">Thesis Styles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#aperture-plotters">Aperture Plotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.aperture.plot_aperture"><code class="docutils literal notranslate"><span class="pre">plot_aperture()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.aperture.plot_physical_apertures"><code class="docutils literal notranslate"><span class="pre">plot_physical_apertures()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#crossing-scheme-plotters">Crossing Scheme Plotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.crossing.plot_single_ir_crossing"><code class="docutils literal notranslate"><span class="pre">plot_single_ir_crossing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.crossing.plot_two_lhc_ips_crossings"><code class="docutils literal notranslate"><span class="pre">plot_two_lhc_ips_crossings()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#beam-enveloppe-plotters">Beam Enveloppe Plotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.envelope.plot_beam_envelope"><code class="docutils literal notranslate"><span class="pre">plot_beam_envelope()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#lattice-plotters">Lattice Plotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.lattice.plot_latwiss"><code class="docutils literal notranslate"><span class="pre">plot_latwiss()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.lattice.plot_machine_survey"><code class="docutils literal notranslate"><span class="pre">plot_machine_survey()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#layout-plotters">Layout Plotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.layout.plot_machine_layout"><code class="docutils literal notranslate"><span class="pre">plot_machine_layout()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.layout.scale_patches"><code class="docutils literal notranslate"><span class="pre">scale_patches()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#phase-space-plotters">Phase Space Plotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.phasespace.plot_courant_snyder_phase_space"><code class="docutils literal notranslate"><span class="pre">plot_courant_snyder_phase_space()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.phasespace.plot_courant_snyder_phase_space_colored"><code class="docutils literal notranslate"><span class="pre">plot_courant_snyder_phase_space_colored()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#tune-diagram-plotters">Tune Diagram Plotters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.tune.farey_sequence"><code class="docutils literal notranslate"><span class="pre">farey_sequence()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.tune.plot_resonance_lines_for_order"><code class="docutils literal notranslate"><span class="pre">plot_resonance_lines_for_order()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.tune.plot_tune_diagram"><code class="docutils literal notranslate"><span class="pre">plot_tune_diagram()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#segment-by-segment-coupling">Segment-by-Segment Coupling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.sbs.coupling.plot_full_ip_rdt"><code class="docutils literal notranslate"><span class="pre">plot_full_ip_rdt()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.sbs.coupling.plot_rdt_component"><code class="docutils literal notranslate"><span class="pre">plot_rdt_component()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#segment-by-segment-phase">Segment-by-Segment Phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.sbs.phase.plot_phase_segment"><code class="docutils literal notranslate"><span class="pre">plot_phase_segment()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.sbs.phase.plot_phase_segment_both_beams"><code class="docutils literal notranslate"><span class="pre">plot_phase_segment_both_beams()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.sbs.phase.plot_phase_segment_one_beam"><code class="docutils literal notranslate"><span class="pre">plot_phase_segment_one_beam()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#plotting-utility-functions">Plotting Utility Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.utils.draw_confidence_ellipse"><code class="docutils literal notranslate"><span class="pre">draw_confidence_ellipse()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.utils.draw_ip_locations"><code class="docutils literal notranslate"><span class="pre">draw_ip_locations()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.utils.find_ip_s_from_segment_start"><code class="docutils literal notranslate"><span class="pre">find_ip_s_from_segment_start()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.utils.get_lhc_ips_positions"><code class="docutils literal notranslate"><span class="pre">get_lhc_ips_positions()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.utils.make_elements_groups"><code class="docutils literal notranslate"><span class="pre">make_elements_groups()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.utils.make_survey_groups"><code class="docutils literal notranslate"><span class="pre">make_survey_groups()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.utils.maybe_get_ax"><code class="docutils literal notranslate"><span class="pre">maybe_get_ax()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyhdtoolkit.plotting.utils.set_arrow_label"><code class="docutils literal notranslate"><span class="pre">set_arrow_label()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils</a><ul>
<li class="toctree-l3"><a class="reference internal" href="utils.html#command-line-utilities">Command Line Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.cmdline.CommandLine"><code class="docutils literal notranslate"><span class="pre">CommandLine</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#context-utilities">Context Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.contexts.timeit"><code class="docutils literal notranslate"><span class="pre">timeit()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#executors-utilities">Executors Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.executors.MultiProcessor"><code class="docutils literal notranslate"><span class="pre">MultiProcessor</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.executors.MultiThreader"><code class="docutils literal notranslate"><span class="pre">MultiThreader</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#htcondor-monitoring">HTCondor Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.htc_monitor.query_condor_q"><code class="docutils literal notranslate"><span class="pre">query_condor_q()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.htc_monitor.read_condor_q"><code class="docutils literal notranslate"><span class="pre">read_condor_q()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#logging-utilities">Logging Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.logging.config_logger"><code class="docutils literal notranslate"><span class="pre">config_logger()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#miscellanous-personnal-utilities">Miscellanous Personnal Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils._misc.add_noise_to_arc_bpms"><code class="docutils literal notranslate"><span class="pre">add_noise_to_arc_bpms()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils._misc.add_noise_to_ir_bpms"><code class="docutils literal notranslate"><span class="pre">add_noise_to_ir_bpms()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils._misc.apply_colin_corrs_balance"><code class="docutils literal notranslate"><span class="pre">apply_colin_corrs_balance()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils._misc.get_betastar_from_opticsfile"><code class="docutils literal notranslate"><span class="pre">get_betastar_from_opticsfile()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils._misc.log_runtime_versions"><code class="docutils literal notranslate"><span class="pre">log_runtime_versions()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils._misc.split_complex_columns"><code class="docutils literal notranslate"><span class="pre">split_complex_columns()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#operations-utilities">Operations Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.operations.ListOperations"><code class="docutils literal notranslate"><span class="pre">ListOperations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.operations.MiscellaneousOperations"><code class="docutils literal notranslate"><span class="pre">MiscellaneousOperations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.operations.NumberOperations"><code class="docutils literal notranslate"><span class="pre">NumberOperations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.operations.StringOperations"><code class="docutils literal notranslate"><span class="pre">StringOperations</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#printing-utilities">Printing Utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.printutil.Background"><code class="docutils literal notranslate"><span class="pre">Background</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.printutil.Foreground"><code class="docutils literal notranslate"><span class="pre">Foreground</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html#pyhdtoolkit.utils.printutil.Styles"><code class="docutils literal notranslate"><span class="pre">Styles</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#asking-for-help">Asking for Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#bug-reports">Bug Reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#enhancement-proposals">Enhancement Proposals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#contributing-code-and-or-documentation">Contributing Code and/or Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#forking-the-repository">Forking the Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#creating-a-development-environment">Creating a Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#creating-a-branch">Creating a Branch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#running-the-test-suite">Running the Test Suite</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#code-standards">Code Standards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../contributing.html#documentation">Documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-5-0">Version 1.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.5.0.html">1.4.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-4-0">Version 1.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.4.0.html">1.4.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-3-2">Version 1.3.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.3.2.html">1.3.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-3-1">Version 1.3.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.3.1.html">1.3.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-3-0">Version 1.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.3.0.html">1.3.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-2-0">Version 1.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.2.0.html">1.2.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-1-1">Version 1.1.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.1.1.html">1.1.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-1-0">Version 1.1.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.1.0.html">1.1.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-1-0-0">Version 1.0.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v1.0.0.html">1.0.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-21-0">Version 0.21.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.21.0.html">0.21.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-20-1">Version 0.20.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.20.1.html">0.20.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-20-0">Version 0.20.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.20.0.html">0.20.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-19-1">Version 0.19.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.19.1.html">0.19.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-19-0">Version 0.19.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.19.0.html">0.19.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-18-0">Version 0.18.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.18.0.html">0.18.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-17-0">Version 0.17.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.17.0.html">0.17.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-16-1">Version 0.16.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.16.1.html">0.16.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-16-0">Version 0.16.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.16.0.html">0.16.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-15-1">Version 0.15.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.15.1.html">0.15.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-15-0">Version 0.15.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.15.0.html">0.15.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-14-1">Version 0.14.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.14.1.html">0.14.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-14-0">Version 0.14.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.14.0.html">0.14.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-13-3">Version 0.13.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.13.3.html">0.13.3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-13-2">Version 0.13.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.13.2.html">0.13.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-13-1">Version 0.13.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.13.1.html">0.13.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-13-0">Version 0.13.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.13.0.html">0.13.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-12-0">Version 0.12.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.12.0.html">0.12.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-11-0">Version 0.11.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.11.0.html">0.11.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-10-0">Version 0.10.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.10.0.html">0.10.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-9-2">Version 0.9.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.9.2.html">0.9.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-9-1">Version 0.9.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.9.1.html">0.9.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-9-0">Version 0.9.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.9.0.html">0.9.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-8-5">Version 0.8.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.8.5.html">0.8.5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-8-4">Version 0.8.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.8.4.html">0.8.4</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-8-3">Version 0.8.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.8.3.html">0.8.3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-8-2">Version 0.8.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.8.2.html">0.8.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-8-1">Version 0.8.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.8.1.html">0.8.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-8-0">Version 0.8.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.8.0.html">0.8.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-7-0">Version 0.7.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.7.0.html">0.7.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-6-0">Version 0.6.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.6.0.html">0.6.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-5-0">Version 0.5.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.5.0.html">0.5.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-4-1">Version 0.4.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.4.1.html">0.4.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-4-0">Version 0.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.4.0.html">0.4.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-3-0">Version 0.3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.3.0.html">0.3.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-2-1">Version 0.2.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.2.1.html">0.2.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release.html#version-0-2-0">Version 0.2.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/v0.2.0.html">0.2.0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Reference bibliography</a></li>
</ul>
</div>
</div>
</nav>
<section class="wy-nav-content-wrap" data-toggle="wy-nav-shift"><nav aria-label="Mobile navigation menu" class="wy-nav-top">
<i class="fa fa-bars" data-toggle="wy-nav-top"></i>
<a href="../index.html">PyhDToolkit</a>
</nav>
<div class="wy-nav-content">
<div class="rst-content">
<div aria-label="Page navigation" role="navigation">
<ul class="wy-breadcrumbs">
<li><a aria-label="Home" class="icon icon-home" href="../index.html"></a></li>
<li class="breadcrumb-item"><a href="../api.html">API Reference</a></li>
<li class="breadcrumb-item active">Plotting</li>
<li class="wy-breadcrumbs-aside">
<!-- User defined GitHub URL -->
<a class="fa fa-github" href="https://github.com/fsoubelet/PyhDToolkit"> Edit on GitHub</a>
</li>
</ul>
<hr/>
</div>
<div class="document" itemscope="itemscope" itemtype="http://schema.org/Article" role="main">
<div itemprop="articleBody">
<section id="module-pyhdtoolkit.plotting.styles">
<span id="plotting"></span><span id="pyhdtoolkit-plotting"></span><h1>Plotting<a class="headerlink" href="#module-pyhdtoolkit.plotting.styles" title="Link to this heading"></a></h1>
<section id="plotting-styles">
<span id="id1"></span><h2>Plotting Styles<a class="headerlink" href="#plotting-styles" title="Link to this heading"></a></h2>
<p>The <strong>style</strong> submodules provide styles to be used with <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a>, mostly tailored for my use, and for good results with the plotters in <code class="xref py py-obj docutils literal notranslate"><span class="pre">plotting</span></code>.
Feel free to use them anyway, as they might be useful to you when using the <code class="xref py py-obj docutils literal notranslate"><span class="pre">plotting</span></code> submodules, or to be adapted.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.styles.install_mpl_styles">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.styles.</span></span><span class="sig-name descname"><span class="pre">install_mpl_styles</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/styles.html#install_mpl_styles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.styles.install_mpl_styles" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Installs the styles defined in the <a class="reference internal" href="#module-pyhdtoolkit.plotting.styles" title="pyhdtoolkit.plotting.styles"><code class="xref py py-obj docutils literal notranslate"><span class="pre">styles</span></code></a> submodules to disk as <strong>.mplstyle</strong>
files. This way, they can be used with <code class="xref py py-obj docutils literal notranslate"><span class="pre">use</span></code> without having to import them
and update the <code class="docutils literal notranslate"><span class="pre">rcParams</span></code> directly.</p>
</dd></dl>
<section id="paper-styles">
<span id="plotting-styles-paper"></span><span id="module-pyhdtoolkit.plotting.styles.paper"></span><h2>Paper Styles<a class="headerlink" href="#paper-styles" title="Link to this heading"></a></h2>
<p>This module contains different styles to be used with <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a>, tailored for figures to be included in my journal papers.
The end results should insert themselves seamlessly with the rest of the paper.
All plots are included as either a single or double column figure in these papers.</p>
<p>The following are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SINGLE_COLUMN</span></code>: For plots to be included in a single column figure environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DOUBLE_COLUMN</span></code>: For plots to be included in a full width (double column) figure environment.</p></li>
</ul>
</section>
<section id="thesis-styles">
<span id="plotting-styles-thesis"></span><span id="module-pyhdtoolkit.plotting.styles.thesis"></span><h2>Thesis Styles<a class="headerlink" href="#thesis-styles" title="Link to this heading"></a></h2>
<p>This module contains different styles to be used with <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a>, tailored for figures to be included in my thesis document.
The end results should insert themselves seamlessly with the rest of the paper.
All plots are included in a LaTeX figure environment, included with <code class="docutils literal notranslate"><span class="pre">[width=0.99\columnwidth]</span></code> (and potentially subfloats inside).
The text body has a fontsize of 12 points, and the figures should integrate to have roughly the same text size.</p>
<p>The following are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SMALL</span></code>: For small simple plots to be included in a multi-figure environment (e.g. a LaTeX figure with 2 subfloats). Two of these should render well when displayed side-by-side in the figure environment (<code class="docutils literal notranslate"><span class="pre">\subfloat[.9\linewidth]</span></code> then <code class="docutils literal notranslate"><span class="pre">\hspace{0.3cm}</span></code> then <code class="docutils literal notranslate"><span class="pre">\subfloat[.9\linewidth]</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIUM</span></code>: For simple plots to be included alone in a LaTeX figure environment (e.g single axis line plots, or scatters with a colorbar like in <a class="reference internal" href="#module-pyhdtoolkit.plotting.tune" title="pyhdtoolkit.plotting.tune"><code class="xref py py-obj docutils literal notranslate"><span class="pre">tune</span></code></a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LARGE</span></code>: For more complex plots to be included alone in a LaTeX figure environment (e.g. multi-axes figures such as in <a class="reference internal" href="#module-pyhdtoolkit.plotting.lattice" title="pyhdtoolkit.plotting.lattice"><code class="xref py py-obj docutils literal notranslate"><span class="pre">lattice</span></code></a>).</p></li>
</ul>
</section>
<section id="aperture-plotters">
<span id="plotting-aperture"></span><span id="module-pyhdtoolkit.plotting.aperture"></span><h2>Aperture Plotters<a class="headerlink" href="#aperture-plotters" title="Link to this heading"></a></h2>
<p>Module with functions to create aperture plots through a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a>
object.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.aperture.plot_aperture">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.aperture.</span></span><span class="sig-name descname"><span class="pre">plot_aperture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xoffset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dipoles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dipole_k1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_quadrupoles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_bpms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aperture_ylim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k0l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k1l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k2l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k3l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/aperture.html#plot_aperture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.aperture.plot_aperture" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Creates a plot representing the lattice layout and the aperture tolerance
across the machine. The tolerance is based on the <code class="docutils literal notranslate"><span class="pre">n1</span></code> values in the
aperture table. One can find an example use of this function in the
<a class="reference internal" href="../gallery/demo_aperture.html#demo-accelerator-aperture"><span class="std std-ref">machine aperture</span></a> example gallery.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function assumes the user has previously made a call to the
<code class="docutils literal notranslate"><span class="pre">APERTURE</span></code> command in <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code>, as it will query relevant values
from the <code class="docutils literal notranslate"><span class="pre">aperture</span></code> table.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function has some heavy logic behind it, especially in how it
needs to order several axes. The easiest way to go about using it is
to manually create and empty figure with the desired properties (size,
etc) then call this function. See the example below or the gallery for
more details.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently the function tries to plot legends for the different layout
patches. The position of the different legends has been hardcoded in
corners and might require users to tweak the axis limits (through
<code class="docutils literal notranslate"><span class="pre">k0l_lim</span></code>, <code class="docutils literal notranslate"><span class="pre">k1l_lim</span></code> and <code class="docutils literal notranslate"><span class="pre">k2l_lim</span></code>) to ensure legend labels and
plotted elements don’t overlap.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.
Positional only.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[str]</span></code>) -- title of the figure.</p></li>
<li><p><strong>xoffset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- An offset applied to the <code class="docutils literal notranslate"><span class="pre">S</span></code> coordinate before
plotting. This is useful if you want to center a plot around a
specific point or element, which would then become located at
<span class="math notranslate nohighlight">\(s = 0\)</span>. Beware this offset is applied before applying the
<em>xlimits</em>. Defaults to 0.</p></li>
<li><p><strong>xlimits</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple[float,</span> <span class="pre">float]</span></code>) -- will implement xlim (for the <code class="docutils literal notranslate"><span class="pre">s</span></code>
coordinate) if this is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, using the tuple passed.</p></li>
<li><p><strong>plot_dipoles</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, dipole patches will be plotted on
the layout subplot of the figure. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. Dipoles
are plotted in blue.</p></li>
<li><p><strong>plot_dipole_k1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, dipole elements with a quadrupolar
gradient will have this gradient plotted as a quadrupole patch.
Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p></li>
<li><p><strong>plot_quadrupoles</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, quadrupole patches will be plotted
on the layout subplot of the figure. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.
Quadrupoles are plotted in red.</p></li>
<li><p><strong>plot_bpms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, additional patches will be plotted on the
layout subplot to represent Beam Position Monitors. BPMs are
plotted in dark grey.</p></li>
<li><p><strong>aperture_ylim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple[float,</span> <span class="pre">float]</span></code>) -- vertical axis limits for the
aperture values. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, to be determined by matplotlib
based on the provided values.</p></li>
<li><p><strong>k0l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- vertical axis limits
for the <code class="docutils literal notranslate"><span class="pre">k0l</span></code> values used for the height of dipole patches. Can
be given as a single value (float, int) or a tuple (in which case
it should be symmetric). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (default) is given, then the
limits will be auto-determined based on the <code class="docutils literal notranslate"><span class="pre">k0l</span></code> values of the
dipoles in the plot.</p></li>
<li><p><strong>k1l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- vertical axis limits
for the <code class="docutils literal notranslate"><span class="pre">k1l</span></code> values used for the height of quadrupole patches.
Can be given as a single value (float, int) or a tuple (in which
case it should be symmetric). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (default) is given, then
the limits will be auto-determined based on the <code class="docutils literal notranslate"><span class="pre">k0l</span></code> values of
the quadrupoles in the plot.</p></li>
<li><p><strong>k2l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- if given, sextupole
patches will be plotted on the layout subplot of the figure. If
given, acts as vertical axis limits for the k2l values used for
the height of sextupole patches. Can be given as a single value
(float, int) or a tuple (in which case it should be symmetric).</p></li>
<li><p><strong>k3l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- if given, octupole
patches will be plotted on the layout subplot of the figure. If
given, acts as vertical axis limits for the k3l values used for
the height of octupole patches. Can be given as a single value
(float, int) or a tuple (in which case it should be symmetric).</p></li>
<li><p><strong>color</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the color argument given to the aperture lines. Defaults
to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, in which case the first color in your <code class="xref py py-obj docutils literal notranslate"><span class="pre">rcParams</span></code>’s
cycler will be used.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument will be transmitted to
<code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_machine_layout</span></code>, later on to
<code class="xref py py-obj docutils literal notranslate"><span class="pre">_plot_lattice_series</span></code>, and then
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.Rectangle.html#matplotlib.patches.Rectangle" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Rectangle</span></code></a>, such as <code class="docutils literal notranslate"><span class="pre">lw</span></code> etc.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="n">plot_aperture</span><span class="p">(</span>
    <span class="n">madx</span><span class="p">,</span> <span class="n">plot_bpms</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">aperture_ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
    <span class="n">k0l_lim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">4e-4</span><span class="p">,</span> <span class="mf">4e-4</span><span class="p">),</span>
    <span class="n">k1l_lim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"darkslateblue"</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.aperture.plot_physical_apertures">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.aperture.</span></span><span class="sig-name descname"><span class="pre">plot_physical_apertures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plane</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xoffset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/aperture.html#plot_physical_apertures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.aperture.plot_physical_apertures" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.2.0.</span></p>
</div>
<p>Determine and plot the “real” physical apertures of elements in the
sequence. A data point is extrapolated at the beginning and the end
of each element, with values based on the <code class="docutils literal notranslate"><span class="pre">aper_1</span></code> and <code class="docutils literal notranslate"><span class="pre">aper_2</span></code>
columns in the <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> table. One can find an example use of this
function in the <a class="reference internal" href="../gallery/demo_aperture.html#demo-accelerator-aperture"><span class="std std-ref">machine aperture</span></a>
example gallery. Original code from <a class="reference external" href="https://github.com/sponsors/ewaagaard">Elias Waagaard</a>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function assumes the user has previously made a call to the
<code class="docutils literal notranslate"><span class="pre">APERTURE</span></code> command in <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code>, as it will query relevant values
from the <code class="docutils literal notranslate"><span class="pre">aperture</span></code> table.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.
Positional only.</p></li>
<li><p><strong>plane</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the physical plane to plot for, should be either <code class="xref py py-obj docutils literal notranslate"><span class="pre">x</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">horizontal</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">y</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">vertical</span></code>, and is case-insensitive.</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- a scaling factor to apply to the beam orbit and beam
enveloppe, for the user to adjust to their wanted scale. Defaults
to 1 (values in [m]).</p></li>
<li><p><strong>xoffset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- An offset applied to the <code class="docutils literal notranslate"><span class="pre">S</span></code> coordinate before
plotting. This is useful if you want to center a plot around a
specific point or element, which would then become located
at <span class="math notranslate nohighlight">\(s = 0\)</span>. Beware this offset is applied before applying
the <em>xlimits</em>. Defaults to 0.</p></li>
<li><p><strong>xlimits</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple[float,</span> <span class="pre">float]</span></code>) -- will implement xlim (for the <code class="docutils literal notranslate"><span class="pre">s</span></code>
coordinate) if this is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, using the tuple passed.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument that can be given to the <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code>
<code class="docutils literal notranslate"><span class="pre">TWISS</span></code> command. If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the
kwargs, the corresponding value is used as the axis object to
plot on.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.12)"><strong>ValueError</strong></a> -- if the <em>plane</em> argument is not one of <code class="xref py py-obj docutils literal notranslate"><span class="pre">x</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">horizontal</span></code>,</p></li>
<li><p><strong>y</strong><strong> or </strong><strong>vertical.</strong> -- </p></li>
</ul>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="n">plot_physical_apertures</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>In order to do the same plot but have all values in millimeters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="n">plot_physical_apertures</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1e3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s2">"S [m]"</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">"X [mm]"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="crossing-scheme-plotters">
<span id="plotting-crossing"></span><span id="module-pyhdtoolkit.plotting.crossing"></span><h2>Crossing Scheme Plotters<a class="headerlink" href="#crossing-scheme-plotters" title="Link to this heading"></a></h2>
<p>Module with functions to plot LHC crossing schemes through a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.crossing.plot_single_ir_crossing">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.crossing.</span></span><span class="sig-name descname"><span class="pre">plot_single_ir_crossing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><span class="pre">Axes</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_df_b1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><span class="pre">DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_df_b2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><span class="pre">DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaling</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlabel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/crossing.html#plot_single_ir_crossing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.crossing.plot_single_ir_crossing" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Plots the X or Y orbit for the IR on the given axis.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function assumes the provided the <em>plot_df_b1</em> and <em>plot_df_b2</em> are already centered
at 0 on the IP point!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axis</strong> (<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a>) -- the <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> on which to plot.</p></li>
<li><p><strong>plot_df_b1</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[pd.DataFrame,</span> <span class="pre">tfs.TfsDataFrame]</span></code>) -- <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> dataframe of the IR zone for beam 1
of the LHC, centered on 0 at IP position (simply done with <code class="docutils literal notranslate"><span class="pre">df.s</span> <span class="pre">=</span> <span class="pre">df.s</span> <span class="pre">-</span> <span class="pre">ip_s</span></code>).</p></li>
<li><p><strong>plot_df_b2</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[pd.DataFrame,</span> <span class="pre">tfs.TfsDataFrame]</span></code>) -- <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> dataframe of the IR zone for beam 2
of the LHC, centered on 0 at IP position (simply done with <code class="docutils literal notranslate"><span class="pre">df.s</span> <span class="pre">=</span> <span class="pre">df.s</span> <span class="pre">-</span> <span class="pre">ip_s</span></code>).</p></li>
<li><p><strong>plot_column</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- which column (should be <code class="docutils literal notranslate"><span class="pre">x</span></code> or <code class="docutils literal notranslate"><span class="pre">y</span></code>) to plot for the orbit.</p></li>
<li><p><strong>scaling</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- scaling factor to apply to the plotted data. Defaults to 1 (no change of data).</p></li>
<li><p><strong>xlabel</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- if given, will be used for the <code class="docutils literal notranslate"><span class="pre">xlabel</span></code> of the axis. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>ylabel</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- if given, will be used for the <code class="docutils literal notranslate"><span class="pre">ylabel</span></code> of the axis. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>title</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- if given, will be used for the <code class="docutils literal notranslate"><span class="pre">title</span></code> of the axis. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plot_single_ir_crossing</span><span class="p">(</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">(),</span> <span class="n">b1_df</span><span class="p">,</span> <span class="n">b2_df</span><span class="p">,</span> <span class="n">plot_column</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">scaling</span><span class="o">=</span><span class="mf">1e3</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">"Orbit X $[mm]$"</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.crossing.plot_two_lhc_ips_crossings">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.crossing.</span></span><span class="sig-name descname"><span class="pre">plot_two_lhc_ips_crossings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">second_ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ir_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">275</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">highlight_mqx_and_mbx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/crossing.html#plot_two_lhc_ips_crossings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.crossing.plot_two_lhc_ips_crossings" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Creates a plot representing the crossing schemes at the two provided IPs. One can find an example
use of this function in the <a class="reference internal" href="../gallery/demo_lhc_crossing_schemes.html#demo-crossing-schemes"><span class="std std-ref">LHC crossing schemes</span></a> example gallery.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function has some heavy logic behind it, especially in how it needs to order several axes. The
easiest way to go about using it is to manually create and empty figure with the desired properties
(size, etc) then call this function. See the example below or the gallery for more details.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This assumes the appropriate LHC sequence and opticsfile have been loaded, and both
<code class="docutils literal notranslate"><span class="pre">lhcb1</span></code> and <code class="docutils literal notranslate"><span class="pre">lhcb2</span></code> beams are defined. It is very recommended to first re-cycle the
sequences so that the desired IPs do not happen at beginning or end of the lattice.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function will get <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> tables for both beams, which means it will <code class="docutils literal notranslate"><span class="pre">USE</span></code> both the
<code class="docutils literal notranslate"><span class="pre">lhcb1</span></code> and <code class="docutils literal notranslate"><span class="pre">lhcb2</span></code> sequences, erasing previously defined errors or orbit corrections. The
second sequence <code class="docutils literal notranslate"><span class="pre">USE</span></code> will be called on is <code class="docutils literal notranslate"><span class="pre">lhcb2</span></code>, which may not be the one you were using
before. Please re-<code class="docutils literal notranslate"><span class="pre">use</span></code> your wanted sequence after calling this function!</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. Positional only.</p></li>
<li><p><strong>first_ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the first of the two IPs to plot crossing schemes for.</p></li>
<li><p><strong>second_ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the second of the two IPs to plot crossing schemes for.</p></li>
<li><p><strong>ir_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- the amount of meters to keep left and right of the IP point. Will also
determine the <code class="docutils literal notranslate"><span class="pre">xlimits</span></code> of the plots. Defaults to 275.</p></li>
<li><p><strong>highlight_mqx_and_mbx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, will add patches highlighting the zones corresponding
to <code class="docutils literal notranslate"><span class="pre">MBX</span></code> and <code class="docutils literal notranslate"><span class="pre">MQX</span></code> elements. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
<li><p><strong>**kwargs</strong> -- If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value is used as the
axis object to plot on.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">plot_two_lhc_ips_crossings</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="n">first_ip</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">second_ip</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="n">plot_two_lhc_ips_crossings</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="n">first_ip</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">second_ip</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">highlight_mqx_and_mbx</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="beam-enveloppe-plotters">
<span id="plotting-envelope"></span><span id="module-pyhdtoolkit.plotting.envelope"></span><h2>Beam Enveloppe Plotters<a class="headerlink" href="#beam-enveloppe-plotters" title="Link to this heading"></a></h2>
<p>Module with functions to create beam enveloppe plots through a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.envelope.plot_beam_envelope">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.envelope.</span></span><span class="sig-name descname"><span class="pre">plot_beam_envelope</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sequence</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plane</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">nsigma</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xoffset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/envelope.html#plot_beam_envelope"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.envelope.plot_beam_envelope" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.2.0.</span></p>
</div>
<p>Draws the beam enveloppe around the beam orbit on the given <em>axis</em>.
The enveloppe is determined from the active sequence’s beam’s parameters.</p>
<p>One can find an example use of this function in the
<a class="reference internal" href="../gallery/demo_beam_enveloppe.html#demo-beam-enveloppe"><span class="std std-ref">beam enveloppe</span></a> example gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.
Positional only.</p></li>
<li><p><strong>sequence</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the name of the sequence to plot the beam enveloppe
for, should be the active sequence. Case-insensitive.</p></li>
<li><p><strong>plane</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the physical plane to plot for, should be either <code class="xref py py-obj docutils literal notranslate"><span class="pre">x</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">horizontal</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">y</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">vertical</span></code>, and is case-insensitive.</p></li>
<li><p><strong>nsigma</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- the standard deviation to use for the beam enveloppe
calculation. A value of 3 will draw the 3 sigma beam enveloppe.
Defaults to 1.</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- a scaling factor to apply to the beam orbit and beam
enveloppe, for the user to adjust to their wanted scale. Defaults
to 1 (values in [m]).</p></li>
<li><p><strong>xoffset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- An offset applied to the <code class="docutils literal notranslate"><span class="pre">S</span></code> coordinate before
plotting. This is useful if you want to center a plot around a
specific point or element, which would then become located
at <span class="math notranslate nohighlight">\(s = 0\)</span>. Beware this offset is applied before applying
the <em>xlimits</em>. Defaults to 0.</p></li>
<li><p><strong>xlimits</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple[float,</span> <span class="pre">float]</span></code>) -- will implement xlim (for the <code class="docutils literal notranslate"><span class="pre">s</span></code>
coordinate) if this is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, using the tuple passed.
Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument that can be given to the <code class="docutils literal notranslate"><span class="pre">MAD-X</span></code>
<code class="docutils literal notranslate"><span class="pre">TWISS</span></code> command. If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the
kwargs, the corresponding value is used as the axis object to
plot on.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.12)"><strong>ValueError</strong></a> -- if the <em>plane</em> argument is not one of <code class="xref py py-obj docutils literal notranslate"><span class="pre">x</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">horizontal</span></code>,</p></li>
<li><p><strong>y</strong><strong> or </strong><strong>vertical.</strong> -- </p></li>
</ul>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="n">plot_beam_envelope</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="s2">"lhcb1"</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">,</span> <span class="n">nsigma</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>In order to do the same plot but have all values in millimeters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="n">plot_beam_envelope</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="s2">"lhcb1"</span><span class="p">,</span> <span class="s2">"x"</span><span class="p">,</span> <span class="n">nsigma</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1e3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s2">"S [m]"</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="s2">"X [mm]"</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="lattice-plotters">
<span id="plotting-lattice"></span><span id="module-pyhdtoolkit.plotting.lattice"></span><h2>Lattice Plotters<a class="headerlink" href="#lattice-plotters" title="Link to this heading"></a></h2>
<p>Module with functions to create lattice plots through a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.lattice.plot_latwiss">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.lattice.</span></span><span class="sig-name descname"><span class="pre">plot_latwiss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xoffset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dipoles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dipole_k1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_quadrupoles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_bpms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">disp_ylim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beta_ylim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k0l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k1l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k2l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k3l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/lattice.html#plot_latwiss"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.lattice.plot_latwiss" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Creates a plot on the current figure (<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.gcf.html#matplotlib.pyplot.gcf" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gcf</span></code></a>) representing the lattice layout and
the <span class="math notranslate nohighlight">\(\beta\)</span>-functions along with the horizontal dispertion function. This is a <em>very, very heavily
refactored</em> version of an initial implementation by <a class="reference external" href="https://github.com/sponsors/sterbini">Guido Sterbini</a>. One can find
example uses of this function in the <a class="reference internal" href="../gallery/demo_lattice.html#demo-accelerator-lattice"><span class="std std-ref">machine lattice</span></a> example gallery.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function has some heavy logic behind it, especially in how it needs to order several axes. The
easiest way to go about using it is to manually create and empty figure with the desired properties
(size, etc) then call this function. See the example below or the gallery for more details.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>At the moment, it is important to give this function symmetric limits for the <code class="docutils literal notranslate"><span class="pre">k0l_lim</span></code>, <code class="docutils literal notranslate"><span class="pre">k1l_lim</span></code>
and <code class="docutils literal notranslate"><span class="pre">k2l_lim</span></code> arguments. Otherwise the element patches will show up vertically displaced from the
axis’ center line.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently the function tries to plot legends for the different layout patches. The position of the
different legends has been hardcoded in corners and might require users to tweak the axis limits
(through <code class="docutils literal notranslate"><span class="pre">k0l_lim</span></code>, <code class="docutils literal notranslate"><span class="pre">k1l_lim</span></code> and <code class="docutils literal notranslate"><span class="pre">k2l_lim</span></code>) to ensure legend labels and plotted elements don’t
overlap.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. Positional only.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[str]</span></code>) -- if provided, is set as title of the plot. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>xoffset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- An offset applied to the <code class="docutils literal notranslate"><span class="pre">S</span></code> coordinate before plotting. This is useful if
you want to center a plot around a specific point or element, which would then become located
at <span class="math notranslate nohighlight">\(s = 0\)</span>. Beware this offset is applied before applying the <em>xlimits</em>. Defaults to 0.</p></li>
<li><p><strong>xlimits</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple[float,</span> <span class="pre">float]</span></code>) -- will implement xlim (for the <code class="docutils literal notranslate"><span class="pre">s</span></code> coordinate) if this is
not <code class="docutils literal notranslate"><span class="pre">None</span></code>, using the tuple passed.</p></li>
<li><p><strong>plot_dipoles</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, dipole patches will be plotted on the layout subplot of
the figure. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. Dipoles are plotted in blue.</p></li>
<li><p><strong>plot_dipole_k1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, dipole elements with a quadrupolar gradient will have this
gradient plotted as a quadrupole patch. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p></li>
<li><p><strong>plot_quadrupoles</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, quadrupole patches will be plotted on the layout
subplot of the figure. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. Quadrupoles are plotted in red.</p></li>
<li><p><strong>plot_bpms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, additional patches will be plotted on the layout subplot to
represent Beam Position Monitors. BPMs are plotted in dark grey.</p></li>
<li><p><strong>disp_ylim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple[float,</span> <span class="pre">float]</span></code>) -- vertical axis limits for the dispersion values.
Can be given as a single value (float, int) or a tuple (in which case it should be
symmetric). Defaults to (-10, 125).</p></li>
<li><p><strong>beta_ylim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple[float,</span> <span class="pre">float]</span></code>) -- vertical axis limits for the betatron function values.
Can be given as a single value (float, int) or a tuple (in which case it should be
symmetric). Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, to be determined by <a class="reference external" href="https://matplotlib.org/stable/index.html#module-matplotlib" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib</span></code></a> based on the
plotted beta values.</p></li>
<li><p><strong>k0l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- vertical axis limits for the <code class="docutils literal notranslate"><span class="pre">k0l</span></code>
values used for the height of dipole patches. Can be given as a single value (float,
int) or a tuple (in which case it should be symmetric). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (default) is given,
then the limits will be auto-determined based on the <code class="docutils literal notranslate"><span class="pre">k0l</span></code> values of the dipoles in
the plot.</p></li>
<li><p><strong>k1l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- vertical axis limits for the <code class="docutils literal notranslate"><span class="pre">k1l</span></code>
values used for the height of quadrupole patches. Can be given as a single value (float,
int) or a tuple (in which case it should be symmetric). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (default) is given,
then the limits will be auto-determined based on the <code class="docutils literal notranslate"><span class="pre">k0l</span></code> values of the quadrupoles
in the plot.</p></li>
<li><p><strong>k2l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- if given, sextupole patches will be plotted
on the layout subplot of the figure. If given, acts as vertical axis limits for the k2l
values used for the height of sextupole patches. Can be given as a single value (float,
int) or a tuple (in which case it should be symmetric).</p></li>
<li><p><strong>k3l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- if given, octupole patches will be plotted
on the layout subplot of the figure. If given, acts as vertical axis limits for the k3l
values used for the height of octupole patches. Can be given as a single value (float,
int) or a tuple (in which case it should be symmetric).</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument will be transmitted to <code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_machine_layout</span></code>,
later on to <code class="xref py py-obj docutils literal notranslate"><span class="pre">_plot_lattice_series</span></code>, and then <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.Rectangle.html#matplotlib.patches.Rectangle" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Rectangle</span></code></a>,
such as <code class="docutils literal notranslate"><span class="pre">lw</span></code> etc.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">title</span> <span class="o">=</span> <span class="s2">"Machine Layout"</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="n">plot_latwiss</span><span class="p">(</span>
    <span class="n">madx</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
    <span class="n">k0l_lim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">),</span>
    <span class="n">k1l_lim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">),</span>
    <span class="n">disp_ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">125</span><span class="p">),</span>
    <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>One can provide ylimits for the machine layout patches as single values:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">title</span> <span class="o">=</span> <span class="s2">"Machine Layout"</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">11</span><span class="p">))</span>
<span class="n">plot_latwiss</span><span class="p">(</span>
    <span class="n">madx</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
    <span class="n">k0l_lim</span><span class="o">=</span><span class="mf">0.15</span><span class="p">,</span>  <span class="c1"># identical to k0l_lim=(-0.15, 0.15)</span>
    <span class="n">k1l_lim</span><span class="o">=</span><span class="mf">0.08</span><span class="p">,</span>  <span class="c1"># identical to k1l_lim=(-0.08, 0.08)</span>
    <span class="n">disp_ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">125</span><span class="p">),</span>
    <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.lattice.plot_machine_survey">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.lattice.</span></span><span class="sig-name descname"><span class="pre">plot_machine_survey</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_elements</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">high_orders</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><span class="pre">Axes</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/lattice.html#plot_machine_survey"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.lattice.plot_machine_survey" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Creates a plot representing the lattice layout and the machine geometry in 2D. This is a very,
very heavily refactored version of an initial implementation by <a class="reference external" href="https://github.com/sponsors/sterbini">Guido Sterbini</a>.
One can find an example use of this function in the <a class="reference internal" href="../gallery/demo_machine_survey.html#demo-machine-survey"><span class="std std-ref">machine survey</span></a>
example gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. Positional only.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[str]</span></code>) -- if provided, is set as title of the plot. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>show_elements</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, will try to plot by differentiating elements.
Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p></li>
<li><p><strong>high_orders</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, plots sextupoles and octupoles if <em>show_elements</em> is <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>,
otherwise only up to quadrupoles. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument will be transmitted to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.scatter.html#matplotlib.pyplot.scatter" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scatter</span></code></a> calls
later on. If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value is
used as the axis object to plot on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> on which the survey is drawn.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plot_machine_survey</span><span class="p">(</span>
    <span class="n">madx</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Machine Survey"</span><span class="p">,</span> <span class="n">show_elements</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">high_orders</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="layout-plotters">
<span id="plotting-layout"></span><span id="module-pyhdtoolkit.plotting.layout"></span><h2>Layout Plotters<a class="headerlink" href="#layout-plotters" title="Link to this heading"></a></h2>
<p>Module with functions used to represent a machine’ elements in an <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a>
object, mostly used in different <code class="xref py py-obj docutils literal notranslate"><span class="pre">plotting</span></code> modules.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.layout.plot_machine_layout">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.layout.</span></span><span class="sig-name descname"><span class="pre">plot_machine_layout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xoffset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dipoles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_dipole_k1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_quadrupoles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_bpms</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k0l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k1l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k2l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">k3l_lim</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/layout.html#plot_machine_layout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.layout.plot_machine_layout" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Draws patches elements representing the lattice layout on the given
<em>axis</em>. This is the function that takes care of the machine layout axis
in <a class="reference internal" href="#pyhdtoolkit.plotting.lattice.plot_latwiss" title="pyhdtoolkit.plotting.lattice.plot_latwiss"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_latwiss</span></code></a> and
<a class="reference internal" href="#pyhdtoolkit.plotting.aperture.plot_aperture" title="pyhdtoolkit.plotting.aperture.plot_aperture"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_aperture</span></code></a>. Its results can be seen in the
<a class="reference internal" href="../gallery/demo_lattice.html#demo-accelerator-lattice"><span class="std std-ref">machine lattice</span></a> and
<a class="reference internal" href="../gallery/demo_aperture.html#demo-accelerator-aperture"><span class="std std-ref">machine aperture</span></a> example galleries.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This current implementation can plot dipoles, quadrupoles, sextupoles,
octupoles and BPMs.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If not provided, the limits for the <code class="docutils literal notranslate"><span class="pre">k0l_lim</span></code>, <code class="docutils literal notranslate"><span class="pre">k1l_lim</span></code> will be
auto-determined, which might not be the perfect choice for you plot.
When providing these limits (also for <code class="docutils literal notranslate"><span class="pre">k2l_lim</span></code>), make sure to
provide symmetric values around 0 (so [-x, x]) otherwise the element
patches will show up vertically displaced from the axis’ center line.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently the function tries to plot legends for the different layout
patches. The position of the different legends has been hardcoded in
corners of the <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> and might require users to tweak
the axis limits (through <code class="docutils literal notranslate"><span class="pre">k0l_lim</span></code>, <code class="docutils literal notranslate"><span class="pre">k1l_lim</span></code> and <code class="docutils literal notranslate"><span class="pre">k2l_lim</span></code>) to
ensure legend labels and plotted elements don’t overlap.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.
Positional only.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[str]</span></code>) -- if provided, is set as title of the plot.
Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>xoffset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- An offset applied to the <code class="docutils literal notranslate"><span class="pre">S</span></code> coordinate before
plotting. This is useful if you want to center a plot around a
specific point or element, which would then become located at
the <span class="math notranslate nohighlight">\(s = 0\)</span> position. Beware this offset is applied before
applying the <em>xlimits</em>. Defaults to 0.</p></li>
<li><p><strong>xlimits</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Tuple[float,</span> <span class="pre">float]</span></code>) -- will implement xlim (for the <code class="docutils literal notranslate"><span class="pre">s</span></code>
coordinate) if this is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, using the tuple passed.</p></li>
<li><p><strong>plot_dipoles</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, dipole patches will be plotted on
the layout subplot of the figure. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>. Dipoles
are plotted in blue.</p></li>
<li><p><strong>plot_dipole_k1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, dipole elements with a quadrupolar
gradient will have this gradient plotted as a quadrupole patch.
Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p></li>
<li><p><strong>plot_quadrupoles</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, quadrupole patches will be plotted
on the layout subplot of the figure. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.
Quadrupoles are plotted in red.</p></li>
<li><p><strong>plot_bpms</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, additional patches will be plotted on the
layout subplot to represent Beam Position Monitors. BPMs are
plotted in dark grey.</p></li>
<li><p><strong>k0l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- vertical axis limits
for the <code class="docutils literal notranslate"><span class="pre">k0l</span></code> values used for the height of dipole patches. Can
be given as a single value (float, int) or a tuple (in which case
it should be symmetric). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (default) is given, then the
limits will be auto-determined based on the <code class="docutils literal notranslate"><span class="pre">k0l</span></code> values of the
dipoles in the plot.</p></li>
<li><p><strong>k1l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- vertical axis limits
for the <code class="docutils literal notranslate"><span class="pre">k1l</span></code> values used for the height of quadrupole patches.
Can be given as a single value (float, int) or a tuple (in which
case it should be symmetric). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (default) is given, then
the limits will be auto-determined based on the <code class="docutils literal notranslate"><span class="pre">k0l</span></code> values of
the quadrupoles in the plot.</p></li>
<li><p><strong>k2l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- if given, sextupole
patches will be plotted on the layout subplot of the figure. If
given, acts as vertical axis limits for the k2l values used for
the height of sextupole patches. Can be given as a single value
(float, int) or a tuple (in which case it should be symmetric).</p></li>
<li><p><strong>k3l_lim</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Union[Tuple[float,</span> <span class="pre">float],</span> <span class="pre">float,</span> <span class="pre">int]</span></code>) -- if given, octupole
patches will be plotted on the layout subplot of the figure. If
given, acts as vertical axis limits for the k3l values used for
the height of octupole patches. Can be given as a single value
(float, int) or a tuple (in which case it should be symmetric).</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument will be transmitted to
<code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_machine_layout</span></code>, later on to
<code class="xref py py-obj docutils literal notranslate"><span class="pre">_plot_lattice_series</span></code>, and then
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.Rectangle.html#matplotlib.patches.Rectangle" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Rectangle</span></code></a>, such as <code class="docutils literal notranslate"><span class="pre">lw</span></code> etc. If either
<code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value
is used as the axis object to plot on. By definition, the
quadrupole elements will be drawn on said axis, and for each
new element type to plot a call to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.twinx.html#matplotlib.axes.Axes.twinx" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">twinx</span></code></a>
is made and the new elements will be drawn on the newly created
twin <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a>. If <code class="docutils literal notranslate"><span class="pre">bpms_legend</span></code> is given as
<a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> and BPMs are plotted, the BPM legend will not be plotted
on the layout axis.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plot_machine_layout</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Machine Elements"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.layout.scale_patches">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.layout.</span></span><span class="sig-name descname"><span class="pre">scale_patches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ylabel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/layout.html#scale_patches"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.layout.scale_patches" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.3.0.</span></p>
</div>
<p>This is a convenience function to update the scale of the elements layout
patches as well as the corresponding y-axis label.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- the scale factor to apply to the patches. The new
height of the patches will be <code class="docutils literal notranslate"><span class="pre">scale</span> <span class="pre">*</span> <span class="pre">original_height</span></code>.</p></li>
<li><p><strong>ylabel</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the new label for the y-axis.</p></li>
<li><p><strong>**kwargs</strong> -- If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the
corresponding value is used as the axis object to plot on,
otherwise the current axis is used.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">plot_machine_layout</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">"Machine Elements"</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">scale_patches</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">scale</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">r</span><span class="s2">"$K_</span><span class="si">{1}</span><span class="s2">L$ $[10^{-2} m^{-1}]$"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="phase-space-plotters">
<span id="plotting-phasespace"></span><span id="module-pyhdtoolkit.plotting.phasespace"></span><h2>Phase Space Plotters<a class="headerlink" href="#phase-space-plotters" title="Link to this heading"></a></h2>
<p>Module with functions to create phase space plots through a <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.phasespace.plot_courant_snyder_phase_space">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.phasespace.</span></span><span class="sig-name descname"><span class="pre">plot_courant_snyder_phase_space</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_coordinates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><span class="pre">ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">pu_coordinates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><span class="pre">ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plane</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Horizontal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><span class="pre">Axes</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/phasespace.html#plot_courant_snyder_phase_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.phasespace.plot_courant_snyder_phase_space" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Creates a plot representing the normalized Courant-Snyder phase space of a particle distribution
when provided by position and momentum coordinates for a specific plane. One can find an example
use of this function in the <a class="reference internal" href="../gallery/demo_phase_space.html#demo-phase-space"><span class="std std-ref">phase space</span></a> example gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. Positional only.</p></li>
<li><p><strong>u_coordinates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code>) -- <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a> of particles’ coordinates for the given plane. Here
<code class="docutils literal notranslate"><span class="pre">u_coordinates[0]</span></code> should be the tracked coordinates for the first particle and so on.</p></li>
<li><p><strong>pu_coordinates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code>) -- <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a> of particles’ momentum coordinates for the
given plane. Here <code class="docutils literal notranslate"><span class="pre">pu_coordinates[0]</span></code> should be the tracked momenta for the first particle
and so on.</p></li>
<li><p><strong>plane</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the physical plane to plot, should be either <code class="docutils literal notranslate"><span class="pre">Horizontal</span></code> or <code class="docutils literal notranslate"><span class="pre">Vertical</span></code>, and is
case-insensitive. Defaults to <code class="docutils literal notranslate"><span class="pre">Horizontal</span></code>.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[str]</span></code>) -- if provided, is set as title of the plot. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>**kwargs</strong> -- If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value is used as the
axis object to plot on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> on which the phase space is drawn.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="n">plot_courant_snyder_phase_space</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="n">x_coords</span><span class="p">,</span> <span class="n">px_coords</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">"Horizontal"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.phasespace.plot_courant_snyder_phase_space_colored">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.phasespace.</span></span><span class="sig-name descname"><span class="pre">plot_courant_snyder_phase_space_colored</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">u_coordinates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><span class="pre">ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">pu_coordinates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><span class="pre">ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plane</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Horizontal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><span class="pre">Figure</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/phasespace.html#plot_courant_snyder_phase_space_colored"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.phasespace.plot_courant_snyder_phase_space_colored" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Creates a plot representing the normalized Courant-Snyder phase space of a particle distribution
when provided by position and momentum coordinates for a specific plane. Each particle trajectory
has its own color on the plot, within the limit of <a class="reference external" href="https://matplotlib.org/stable/api/pyplot_summary.html#module-matplotlib.pyplot" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pyplot</span></code></a>’s 156 named colors, after
the function loops back to the first color again. One can find an example use of this function in
the <a class="reference internal" href="../gallery/demo_phase_space.html#demo-phase-space"><span class="std std-ref">phase space</span></a> example gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. Positional only.</p></li>
<li><p><strong>u_coordinates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code>) -- <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a> of particles’ coordinates for the given plane. Here
<code class="docutils literal notranslate"><span class="pre">u_coordinates[0]</span></code> should be the tracked coordinates for the first particle and so on.</p></li>
<li><p><strong>pu_coordinates</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">np.ndarray</span></code>) -- <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.0)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ndarray</span></code></a> of particles’ momentum coordinates for the
given plane. Here <code class="docutils literal notranslate"><span class="pre">pu_coordinates[0]</span></code> should be the tracked momenta for the first particle
and so on.</p></li>
<li><p><strong>savefig</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- if not <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, will save the figure to file using the string value passed.</p></li>
<li><p><strong>plane</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the physical plane to plot, should be either <code class="docutils literal notranslate"><span class="pre">Horizontal</span></code> or <code class="docutils literal notranslate"><span class="pre">Vertical</span></code>, and is
case-insensitive. Defaults to <code class="docutils literal notranslate"><span class="pre">Horizontal</span></code>.</p></li>
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[str]</span></code>) -- if provided, is set as title of the plot. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>**kwargs</strong> -- If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value is used as the
axis object to plot on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> on which the phase space is drawn.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>
<span class="n">plot_courant_snyder_phase_space_colored</span><span class="p">(</span><span class="n">madx</span><span class="p">,</span> <span class="n">x_coords</span><span class="p">,</span> <span class="n">px_coords</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">"Horizontal"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="tune-diagram-plotters">
<span id="plotting-tune"></span><span id="module-pyhdtoolkit.plotting.tune"></span><h2>Tune Diagram Plotters<a class="headerlink" href="#tune-diagram-plotters" title="Link to this heading"></a></h2>
<p>Module with functions to create tune diagram plots.
These provide functionality to draw Farey sequences up to a desired order.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.tune.farey_sequence">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.tune.</span></span><span class="sig-name descname"><span class="pre">farey_sequence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.12)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/tune.html#farey_sequence"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.tune.farey_sequence" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Returns the n-th farey_sequence sequence, ascending, where n is the provided <em>order</em>.
Original code from <a class="reference external" href="https://github.com/sponsors/rogeliotomas">Rogelio Tomás</a> (see Numerical Methods 2018 CAS
proceedings, <span id="id2">Tomás <em>et al.</em> [<a class="reference internal" href="../bibliography.html#id8" title="R. Tomás, X. Buffat, J. Coello, E. Fol, and L. Malina. Imperfections and corrections. 2018. arXiv:2006.10661.">TBC+18</a>]</span>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the order up to which we want to calculate the sequence.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The sequence as a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code></a> of plottable 2D points.</p>
</dd>
</dl>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.tune.plot_resonance_lines_for_order">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.tune.</span></span><span class="sig-name descname"><span class="pre">plot_resonance_lines_for_order</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><span class="pre">Axes</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/tune.html#plot_resonance_lines_for_order"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.tune.plot_resonance_lines_for_order" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Plot resonance lines from farey sequences of the given <em>order</em> on the provided
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the order of the resonance.</p></li>
<li><p><strong>axis</strong> (<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a>) -- the <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> on which to plot
the resonance lines.</p></li>
<li><p><strong>**kwargs</strong> -- any keyword argument is given to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plot_resonance_lines_for_order</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">"blue"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.tune.plot_tune_diagram">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.tune.</span></span><span class="sig-name descname"><span class="pre">plot_tune_diagram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">legend_title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">differentiate_orders</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><span class="pre">Axes</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/tune.html#plot_tune_diagram"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.tune.plot_tune_diagram" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Creates a plot representing the tune diagram up to the given <em>max_order</em>. One can find an example
use of this function in the <a class="reference internal" href="../gallery/demo_tune_diagram.html#demo-tune-diagram"><span class="std std-ref">tune diagram</span></a> example gallery.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The first order lines make up the [(0, 0), (0, 1), (1, 1), (1, 0)] square and will only be
seen when redefining the limits of the figure, which are by default [0, 1] on each axis.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Optional[str]</span></code>) -- if provided, is set as title of the plot. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>legend_title</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- if given, will be used as the title of the plot’s legend. If set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>,
then creating a legend for the figure will not be done by this function and left up to the
user’s care (a call to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.legend.html#matplotlib.pyplot.legend" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">legend</span></code></a> will do). Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p><strong>max_order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- the order up to which to plot resonance lines for, should not exceed 6.
Defaults to 6.</p></li>
<li><p><strong>differentiate_orders</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- if <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, the lines for each order will be of a different color.
When set to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, there is still minimal differentation through <code class="docutils literal notranslate"><span class="pre">alpha</span></code>, <code class="docutils literal notranslate"><span class="pre">linewidth</span></code>
and <code class="docutils literal notranslate"><span class="pre">linestyle</span></code>. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>.</p></li>
<li><p><strong>**kwargs</strong> -- keyword arguments will be transmitted to the <a class="reference internal" href="#pyhdtoolkit.plotting.tune.plot_resonance_lines_for_order" title="pyhdtoolkit.plotting.tune.plot_resonance_lines_for_order"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot_resonance_lines_for_order</span></code></a> function
and later on to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">plot</span></code></a>. Be aware that <code class="docutils literal notranslate"><span class="pre">alpha</span></code>, <code class="docutils literal notranslate"><span class="pre">ls</span></code>, <code class="docutils literal notranslate"><span class="pre">lw</span></code>, <code class="docutils literal notranslate"><span class="pre">color</span></code>
and <code class="docutils literal notranslate"><span class="pre">label</span></code> are already set by this function and providing them as kwargs might lead to errors.
If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value is used as the axis object
to plot on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> on which the tune diagram is drawn.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plot_tune_diagram</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">max_order</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">differentiate_orders</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="segment-by-segment-coupling">
<span id="plotting-sbs-coupling"></span><span id="module-pyhdtoolkit.plotting.sbs.coupling"></span><h2>Segment-by-Segment Coupling<a class="headerlink" href="#segment-by-segment-coupling" title="Link to this heading"></a></h2>
<p>Functions to plot coupling components of Segment-by-Segment results.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.sbs.coupling.plot_full_ip_rdt">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.sbs.coupling.</span></span><span class="sig-name descname"><span class="pre">plot_full_ip_rdt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b1_segment_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b2_segment_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b1_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b2_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rdt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'F1001'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abs_ylimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">real_ylimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imag_ylimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.12)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><span class="pre">Figure</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/sbs/coupling.html#plot_full_ip_rdt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.sbs.coupling.plot_full_ip_rdt" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 0.19.0.</span></p>
</div>
<p>Plots all component of the given coupling <em>rdt</em> over the segment, for both Beam 1 and Beam 2. Optionally
highlights the IP location. One can find an example use of this function in the
<a class="reference internal" href="../gallery/demo_sbs_plotting.html#demo-sbs-plotting"><span class="std std-ref">segment-by-segment plotting</span></a> example gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>b1_segment_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment coupling result for
Beam 1 in the given segment.</p></li>
<li><p><strong>b2_segment_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment coupling result for
Beam 2 in the given segment.</p></li>
<li><p><strong>b1_model</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the Beam 1 model used in the analysis, optional.
If given, then the IP location in the segment will be highlighted by a vertical grey line.</p></li>
<li><p><strong>b2_model</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the Beam 2 model used in the analysis, optional.
If given, then the IP location in the segment will be highlighted by a vertical grey line.</p></li>
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- The IP number of the segment.</p></li>
<li><p><strong>rdt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- The name of the coupling resonance driving term to plot, either <code class="docutils literal notranslate"><span class="pre">F1001</span></code> or <code class="docutils literal notranslate"><span class="pre">F1010</span></code>.
Case insensitive.</p></li>
<li><p><strong>**kwargs</strong> -- Keyword arguments will be transmitted to the figure creation call to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subplots</span></code></a>.
If <code class="docutils literal notranslate"><span class="pre">b1_ylabel</span></code> or <code class="docutils literal notranslate"><span class="pre">b2_ylabel</span></code> are found, they will be used as y-label for the respective beams axes.
If <code class="docutils literal notranslate"><span class="pre">bbox_to_anchor</span></code> is found, it will be used to position the legend across the whole figure space.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Figure</span></code></a> on which the plot is created.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_full_ip_rdt</span><span class="p">(</span>
    <span class="n">couple_b1_tfs</span><span class="p">,</span>
    <span class="n">couple_b2_tfs</span><span class="p">,</span>
    <span class="n">b1_model_tfs</span><span class="p">,</span>
    <span class="n">b2_model_tfs</span><span class="p">,</span>
    <span class="n">ip</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
    <span class="n">abs_ylimits</span><span class="o">=</span><span class="p">(</span><span class="mf">5e-3</span><span class="p">,</span> <span class="mf">6.5e-2</span><span class="p">),</span>
    <span class="n">real_ylimits</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">1e-1</span><span class="p">,</span> <span class="mf">1e-1</span><span class="p">),</span>
    <span class="n">imag_ylimits</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mf">1e-1</span><span class="p">,</span> <span class="mf">1e-1</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.sbs.coupling.plot_rdt_component">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.sbs.coupling.</span></span><span class="sig-name descname"><span class="pre">plot_rdt_component</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b1_segment_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b2_segment_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b1_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b2_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rdt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'F1001'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">component</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'ABS'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><span class="pre">Figure</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/sbs/coupling.html#plot_rdt_component"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.sbs.coupling.plot_rdt_component" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 0.19.0.</span></p>
</div>
<p>Plots for Beam 1 and Beam 2 vertically a component of the given coupling <em>rdt</em> over the segment.
Optionally highlights the IP location. One can find an example use of this function in the
<a class="reference internal" href="../gallery/demo_sbs_plotting.html#demo-sbs-plotting"><span class="std std-ref">segment-by-segment plotting</span></a> example gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a>) -- The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> to plot on. Will get the current axis if no
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> is given.</p></li>
<li><p><strong>b1_segment_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment coupling result for
Beam 1 in the given segment.</p></li>
<li><p><strong>b2_segment_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment coupling result for
Beam 2 in the given segment.</p></li>
<li><p><strong>b1_model</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the Beam 1 model used in the analysis, optional.
If given, then the IP location in the segment will be highlighted by a vertical grey line.</p></li>
<li><p><strong>b2_model</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the Beam 2 model used in the analysis, optional.
If given, then the IP location in the segment will be highlighted by a vertical grey line.</p></li>
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- The IP number of the segment.</p></li>
<li><p><strong>rdt</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- The name of the coupling resonance driving term to plot, either <code class="docutils literal notranslate"><span class="pre">F1001</span></code> or <code class="docutils literal notranslate"><span class="pre">F1010</span></code>.
Case insensitive.</p></li>
<li><p><strong>component</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- Which component of the RDT is considered, either <code class="docutils literal notranslate"><span class="pre">ABS</span></code>, <code class="docutils literal notranslate"><span class="pre">RE</span></code> or <code class="docutils literal notranslate"><span class="pre">IM</span></code>,
for absolute value or real / imaginary part, respectively. Case insensitive.</p></li>
<li><p><strong>**kwargs</strong> -- Keyword arguments will be transmitted to the figure creation call to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subplots</span></code></a>.
If <code class="docutils literal notranslate"><span class="pre">b1_ylabel</span></code> or <code class="docutils literal notranslate"><span class="pre">b2_ylabel</span></code> are found, they will be used as y-label for the respective beams axes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Figure</span></code></a> on which the plot is created.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_rdt_component</span><span class="p">(</span>
    <span class="n">b1_segment_df</span><span class="o">=</span><span class="n">tfs</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">"B1/sbscouple_IP1.out"</span><span class="p">),</span>
    <span class="n">b2_segment_df</span><span class="o">=</span><span class="n">tfs</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">"B2/sbscouple_IP1.out"</span><span class="p">),</span>
    <span class="n">b1_model</span><span class="o">=</span><span class="n">b1_model_tfs</span><span class="p">,</span>
    <span class="n">b2_model</span><span class="o">=</span><span class="n">b2_model_tfs</span><span class="p">,</span>
    <span class="n">ip</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
    <span class="n">b1_ylabel</span><span class="o">=</span><span class="sa">r</span><span class="s2">"$\mathrm{Beam\ 1}$ $|f_</span><span class="si">{1001}</span><span class="s2">|$"</span><span class="p">,</span>
    <span class="n">b2_ylabel</span><span class="o">=</span><span class="sa">r</span><span class="s2">"$\mathrm{Beam\ 2}$ $|f_</span><span class="si">{1001}</span><span class="s2">|$"</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="segment-by-segment-phase">
<span id="plotting-sbs-phase"></span><span id="module-pyhdtoolkit.plotting.sbs.phase"></span><h2>Segment-by-Segment Phase<a class="headerlink" href="#segment-by-segment-phase" title="Link to this heading"></a></h2>
<p>Functions to plot phase values of Segment-by-Segment results.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.sbs.phase.plot_phase_segment">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.sbs.phase.</span></span><span class="sig-name descname"><span class="pre">plot_phase_segment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><span class="pre">Axes</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segment_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plane</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'x'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/sbs/phase.html#plot_phase_segment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.sbs.phase.plot_phase_segment" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 0.19.0.</span></p>
</div>
<p>Plots a the phase for a given plane over the segment, optionally highlighting the IP location. One
can find an example use of this function in the <a class="reference internal" href="../gallery/demo_sbs_plotting.html#demo-sbs-plotting"><span class="std std-ref">segment-by-segment plotting</span></a>
example gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ax</strong> (<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a>) -- The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> to plot on. Will get the current axis if no
<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> is given.</p></li>
<li><p><strong>segment_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment coupling result for
the given segment.</p></li>
<li><p><strong>model_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the model used in the analysis, optional. If
given, then the IP location in the segment will be determined from the two dataframes and will
be highlighted in the plot by a vertical grey line.</p></li>
<li><p><strong>plane</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- the plane the data is is for in the provided <em>segment_df</em>. Will be used for the ylabel.
Should be either “x” or “y”, case-insensitive.</p></li>
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- The IP number of the segment.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plot_phase_segment</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">segment_df</span><span class="p">,</span> <span class="n">b1_model_tfs</span><span class="p">,</span> <span class="n">plane</span><span class="o">=</span><span class="s2">"x"</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.sbs.phase.plot_phase_segment_both_beams">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.sbs.phase.</span></span><span class="sig-name descname"><span class="pre">plot_phase_segment_both_beams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">b1_phase_x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b1_phase_y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b2_phase_x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b2_phase_y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b1_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b2_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><span class="pre">Figure</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/sbs/phase.html#plot_phase_segment_both_beams"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.sbs.phase.plot_phase_segment_both_beams" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 0.19.0.</span></p>
</div>
<p>Plots the propagated measured phase and the propagated corrected phase for the given IP segment, for
both planes and both beams. Optionally highlights the IP location in the segment. One can find an
example use of this function in the <a class="reference internal" href="../gallery/demo_sbs_plotting.html#demo-sbs-plotting"><span class="std std-ref">segment-by-segment plotting</span></a> example
gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>b1_phase_x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment phase result for
the horizontal plane in the given segment, for Beam 1.</p></li>
<li><p><strong>b1_phase_y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment phase result for
the vertical plane in the given segment, for Beam 1.</p></li>
<li><p><strong>b2_phase_x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment phase result for
the horizontal plane in the given segment, for Beam 2.</p></li>
<li><p><strong>b2_phase_x</strong> -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment phase result for
the vertical plane in the given segment, for Beam 2.</p></li>
<li><p><strong>b1_model</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the Beam 1 model used in the analysis, optional.
If given, then the IP location in the segment will be highlighted by a vertical grey line.</p></li>
<li><p><strong>b2_model</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the Beam 2 model used in the analysis, optional.
If given, then the IP location in the segment will be highlighted by a vertical grey line.</p></li>
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- The IP number of the segment.</p></li>
<li><p><strong>**kwargs</strong> -- Keyword arguments will be transmitted to the figure creation call to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subplots</span></code></a>.
If <code class="docutils literal notranslate"><span class="pre">bbox_to_anchor</span></code> is found, it will be used to position the legend across the whole figure space.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Figure</span></code></a> on which the plot is created.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_phase_segment_both_beams</span><span class="p">(</span>
    <span class="n">phasex_b1_tfs</span><span class="p">,</span>
    <span class="n">phasey_b1_tfs</span><span class="p">,</span>
    <span class="n">phasex_b2_tfs</span><span class="p">,</span>
    <span class="n">phasey_b2_tfs</span><span class="p">,</span>
    <span class="n">b1_model_tfs</span><span class="p">,</span>
    <span class="n">b2_model_tfs</span><span class="p">,</span>
    <span class="n">ip</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
    <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.535</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.sbs.phase.plot_phase_segment_one_beam">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.sbs.phase.</span></span><span class="sig-name descname"><span class="pre">plot_phase_segment_one_beam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phase_x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">phase_y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><span class="pre">Figure</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/sbs/phase.html#plot_phase_segment_one_beam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.sbs.phase.plot_phase_segment_one_beam" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 0.19.0.</span></p>
</div>
<p>Plots the propagated measured phase and the propagated corrected phase for the given IP segment, for
both planes for a given beam. Optionally highlights the IP location in the segment. One can find an
example use of this function in the <a class="reference internal" href="../gallery/demo_sbs_plotting.html#demo-sbs-plotting"><span class="std std-ref">segment-by-segment plotting</span></a> example
gallery.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase_x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment phase result for
the horizontal plane in the given segment.</p></li>
<li><p><strong>phase_y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment phase result for
the vertical plane in the given segment.</p></li>
<li><p><strong>model</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the model used in the analysis, optional.
If given, then the IP location in the segment will be highlighted by a vertical grey line.</p></li>
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- The IP number of the segment.</p></li>
<li><p><strong>**kwargs</strong> -- Keyword arguments will be transmitted to the figure creation call to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subplots</span></code></a>.
If <code class="docutils literal notranslate"><span class="pre">bbox_to_anchor</span></code> is found, it will be used to position the legend across the whole figure space.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Figure</span></code></a> on which the plot is created.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plot_phase_segment_one_beam</span><span class="p">(</span>
    <span class="n">sbs_phasex</span><span class="p">,</span> <span class="n">sbs_phasey</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="n">b2_model_tfs</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<section id="plotting-utility-functions">
<span id="plotting-utils"></span><span id="module-pyhdtoolkit.plotting.utils"></span><h2>Plotting Utility Functions<a class="headerlink" href="#plotting-utility-functions" title="Link to this heading"></a></h2>
<p>Module with functions to used throught the different <code class="xref py py-obj docutils literal notranslate"><span class="pre">plotting</span></code> modules.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.utils.draw_confidence_ellipse">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.utils.</span></span><span class="sig-name descname"><span class="pre">draw_confidence_ellipse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ArrayLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ArrayLike</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_std</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facecolor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'none'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.Ellipse.html#matplotlib.patches.Ellipse" title="(in Matplotlib v3.9.1)"><span class="pre">Ellipse</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/utils.html#draw_confidence_ellipse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.utils.draw_confidence_ellipse" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.2.0.</span></p>
</div>
<p>Plot the covariance confidence ellipse of <em>x</em> and <em>y</em>. This code is taken from the
<a class="reference external" href="https://matplotlib.org/stable/gallery/statistics/confidence_ellipse.html">matplotlib gallery</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>One might want to provide the <code class="xref py py-obj docutils literal notranslate"><span class="pre">edgecolor</span></code> to this function.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- array-like, should be of shape (n,).</p></li>
<li><p><strong>y</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">ArrayLike</span></code>) -- array-like, should be of shape (n,).</p></li>
<li><p><strong>n_std</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- The number of standard deviations of the data to
highlight, to determine the ellipse’s radiuses.</p></li>
<li><p><strong>facecolor</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- The facecolor of the ellipse.</p></li>
<li><p><strong>**kwargs</strong> -- Any keyword argument will be forwarded to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.Ellipse.html#matplotlib.patches.Ellipse" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ellipse</span></code></a>.
If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value is
used as the axis object to plot on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The corresponding <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.patches.Ellipse.html#matplotlib.patches.Ellipse" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ellipse</span></code></a> object added to the axis.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s2">"."</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">draw_confidence_ellipse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">n_std</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">"red"</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.utils.draw_ip_locations">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.utils.</span></span><span class="sig-name descname"><span class="pre">draw_ip_locations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ip_positions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lines</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'outside'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/utils.html#draw_ip_locations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.utils.draw_ip_locations" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Plots the interaction points’ locations into the background of your <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ip_positions</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>) -- a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a> containing IP names as keys and their longitudinal positions
as values, as returned by <a class="reference internal" href="#pyhdtoolkit.plotting.utils.get_lhc_ips_positions" title="pyhdtoolkit.plotting.utils.get_lhc_ips_positions"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_lhc_ips_positions</span></code></a>.</p></li>
<li><p><strong>lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) -- whether to also draw vertical lines at the IP positions. Defaults to <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>.</p></li>
<li><p><strong>location</strong> -- where to show the IP names on the provided <em>axis</em>, either <code class="docutils literal notranslate"><span class="pre">inside</span></code> (will draw text
at the bottom of the axis) or <code class="docutils literal notranslate"><span class="pre">outside</span></code> (will draw text on top of the axis). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> is
given, then no labels are drawn. Defaults to <code class="docutils literal notranslate"><span class="pre">outside</span></code>.</p></li>
<li><p><strong>**kwargs</strong> -- If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value is used as
the axis object to plot on.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">twiss_df</span> <span class="o">=</span> <span class="n">tfs</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">"twiss_output.tfs"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s2">"NAME"</span><span class="p">)</span>
<span class="n">twiss_df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">"S"</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s2">"BETX"</span><span class="p">,</span> <span class="s2">"BETY"</span><span class="p">])</span>
<span class="n">ips</span> <span class="o">=</span> <span class="n">get_lhc_ips_positions</span><span class="p">(</span><span class="n">twiss_df</span><span class="p">)</span>
<span class="n">draw_ip_locations</span><span class="p">(</span><span class="n">ip_positions</span><span class="o">=</span><span class="n">ips</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.utils.find_ip_s_from_segment_start">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.utils.</span></span><span class="sig-name descname"><span class="pre">find_ip_s_from_segment_start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">segment_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TfsDataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/utils.html#find_ip_s_from_segment_start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.utils.find_ip_s_from_segment_start" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 0.19.0.</span></p>
</div>
<p>Finds the S-offset of the IP from the start of segment by comparing the S-values for the elements in the model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>segment_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- A <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataFrame</span></code> of the segment-by-segment result for the given segment.</p></li>
<li><p><strong>model_df</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tfs.TfsDataFrame</span></code>) -- The <code class="xref py py-obj docutils literal notranslate"><span class="pre">TfsDataframe</span></code> of the model’s TWISS, usually <strong>twiss_elements.dat</strong>.</p></li>
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- The <code class="docutils literal notranslate"><span class="pre">LHC</span></code> IP number.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The S-offset of the IP from the BPM at the start of segment.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ip_offset_in_segment</span> <span class="o">=</span> <span class="n">find_ip_s_from_segment_start</span><span class="p">(</span>
    <span class="n">segment_df</span><span class="o">=</span><span class="n">sbsphaseext_IP1</span><span class="p">,</span> <span class="n">model_df</span><span class="o">=</span><span class="n">twiss_elements</span><span class="p">,</span> <span class="n">ip</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.utils.get_lhc_ips_positions">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.utils.</span></span><span class="sig-name descname"><span class="pre">get_lhc_ips_positions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataframe</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><span class="pre">DataFrame</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/utils.html#get_lhc_ips_positions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.utils.get_lhc_ips_positions" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Returns a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a> of LHC IPs and their positions from the provided <em>dataframe</em>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This function expects the IP names to be in the dataframe’s index,
and cased as the longitudinal coordinate column: aka uppercase names
(<code class="docutils literal notranslate"><span class="pre">IP1</span></code>, <code class="docutils literal notranslate"><span class="pre">IP2</span></code>, etc) and <code class="docutils literal notranslate"><span class="pre">S</span></code> column; or lowercase names
(<code class="docutils literal notranslate"><span class="pre">ip1</span></code>, <code class="docutils literal notranslate"><span class="pre">ip2</span></code>, etc) and <code class="docutils literal notranslate"><span class="pre">s</span></code> column.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataframe</strong> (<a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code></a>) -- a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DataFrame</span></code></a> containing at least
IP positions. A typical example is a <code class="docutils literal notranslate"><span class="pre">TWISS</span></code> call output.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a> with IP names as keys and their longitudinal locations as values.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">twiss_df</span> <span class="o">=</span> <span class="n">tfs</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">"twiss_output.tfs"</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="s2">"NAME"</span><span class="p">)</span>
<span class="n">ips</span> <span class="o">=</span> <span class="n">get_lhc_ips_positions</span><span class="p">(</span><span class="n">twiss_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.utils.make_elements_groups">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.utils.</span></span><span class="sig-name descname"><span class="pre">make_elements_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xoffset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xlimits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><span class="pre">DataFrame</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/utils.html#make_elements_groups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.utils.make_elements_groups" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Provided with an active <code class="xref py py-obj docutils literal notranslate"><span class="pre">cpymad</span></code> instance after having ran a script, will returns different portions of
the twiss table’s dataframe for different magnetic elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. Positional only.</p></li>
<li><p><strong>xoffset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- An offset applied to the S coordinate before plotting. This is useful is you want
to center a plot around a specific point or element, which would then become located at s = 0.</p></li>
<li><p><strong>xlimits</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple[float,</span> <span class="pre">float]</span></code>) -- will only consider elements within xlim (for the s coordinate) if this
is not None, using the tuple passed.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a> containing a <code class="xref py py-obj docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> for dipoles, focusing quadrupoles, defocusing
quadrupoles, sextupoles and octupoles. The keys are self-explanatory.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">element_dfs</span> <span class="o">=</span> <span class="n">make_elements_groups</span><span class="p">(</span><span class="n">madx</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.utils.make_survey_groups">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.utils.</span></span><span class="sig-name descname"><span class="pre">make_survey_groups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">madx</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><span class="pre">Madx</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><span class="pre">dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v2.2.2)"><span class="pre">DataFrame</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/utils.html#make_survey_groups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.utils.make_survey_groups" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Provided with an active <code class="xref py py-obj docutils literal notranslate"><span class="pre">cpymad</span></code> instance after having ran a script, will returns different portions of
the survey table’s dataframe for different magnetic elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>madx</strong> (<a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-class docutils literal notranslate"><span class="pre">cpymad.madx.Madx</span></code></a>) -- an instanciated <a class="reference external" href="https://hibtc.github.io/cpymad/automod/cpymad.madx.Madx.html#cpymad.madx.Madx" title="(in cpymad v1.16)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Madx</span></code></a> object. Positional only.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a> containing a <code class="xref py py-obj docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> for dipoles, focusing quadrupoles, defocusing
quadrupoles, sextupoles and octupoles. The keys are self-explanatory.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">survey_dfs</span> <span class="o">=</span> <span class="n">make_survey_groups</span><span class="p">(</span><span class="n">madx</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.utils.maybe_get_ax">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.utils.</span></span><span class="sig-name descname"><span class="pre">maybe_get_ax</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/utils.html#maybe_get_ax"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.utils.maybe_get_ax" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.0.</span></p>
</div>
<p>Convenience function to get the axis, regardless of whether or not it is provided
to the plotting function itself. It used to be that the first argument of plotting
functions in this package had to be the ‘axis’ object, but that’s no longer the case.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> -- the arguments passed to the plotting function.</p></li>
<li><p><strong>**kwargs</strong> -- the keyword arguments passed to the plotting function.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Axes</span></code></a> object to plot on, the args and the kwargs (without the
‘ax’ argument if it initially was present). If no axis was provided, then it will be
created with a call to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.gca.html#matplotlib.pyplot.gca" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gca</span></code></a>.</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<p>This is to be called at the beginning of your plotting functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">my_plotting_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">ax</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="n">maybe_get_ax</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="c1"># do stuff with ax</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
<dl class="py function">
<dt class="sig sig-object py" id="pyhdtoolkit.plotting.utils.set_arrow_label">
<span class="sig-prename descclassname"><span class="pre">pyhdtoolkit.plotting.utils.</span></span><span class="sig-name descname"><span class="pre">set_arrow_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrow_position</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_position</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.12)"><span class="pre">tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'k'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arrow_arc_rad</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fontsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference external" href="https://matplotlib.org/stable/api/text_api.html#matplotlib.text.Annotation" title="(in Matplotlib v3.9.1)"><span class="pre">Annotation</span></a></span></span><a class="reference internal" href="../_modules/pyhdtoolkit/plotting/utils.html#set_arrow_label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pyhdtoolkit.plotting.utils.set_arrow_label" title="Link to this definition"></a></dt>
<dd><div class="versionadded">
<p><span class="versionmodified added">Added in version 0.6.0.</span></p>
</div>
<p>Adds on the provided <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a> a label box with text and an arrow from the box to a specified position.
Original code from <a class="reference external" href="https://github.com/sponsors/sterbini">Guido Sterbini</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>axis</strong> (<a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a>) -- a <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.html#matplotlib.axes.Axes" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></a> to plot on.</p></li>
<li><p><strong>label</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- label text to print on the axis.</p></li>
<li><p><strong>arrow_position</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple[float,</span> <span class="pre">float]</span></code>) -- where on the plot to point the tip of the arrow.</p></li>
<li><p><strong>label_position</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple[float,</span> <span class="pre">float]</span></code>) -- where on the plot the text label (and thus start
of the arrow) is.</p></li>
<li><p><strong>color</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) -- color parameter for your arrow and label. Defaults to “k”.</p></li>
<li><p><strong>arrow_arc_rad</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a>) -- angle value defining the upwards / downwards shape of and
bending of the arrow.</p></li>
<li><p><strong>fontsize</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>) -- text size in the box.</p></li>
<li><p><strong>**kwargs</strong> -- additional keyword arguments are transmitted to <a class="reference external" href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.annotate.html#matplotlib.axes.Axes.annotate" title="(in Matplotlib v3.9.1)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">annotate</span></code></a>.
If either <code class="xref py py-obj docutils literal notranslate"><span class="pre">ax</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">axis</span></code> is found in the kwargs, the corresponding value is used as the
axis object to plot on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A <code class="xref py py-obj docutils literal notranslate"><span class="pre">matploblit.text.Annotation</span></code> of the created annotation.</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">set_arrow_label</span><span class="p">(</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">"Your label"</span><span class="p">,</span>
    <span class="n">arrow_position</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">label_position</span><span class="o">=</span><span class="p">(</span><span class="mf">1.1</span> <span class="o">*</span> <span class="n">some_value</span><span class="p">,</span> <span class="mf">0.75</span> <span class="o">*</span> <span class="n">another_value</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">"indianred"</span><span class="p">,</span>
    <span class="n">arrow_arc_rad</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>
</section>
</div>
</div>
<footer><div aria-label="Footer" class="rst-footer-buttons" role="navigation">
<a accesskey="p" class="btn btn-neutral float-left" href="optics.html" rel="prev" title="Optics"><span aria-hidden="true" class="fa fa-arrow-circle-left"></span> Previous</a>
<a accesskey="n" class="btn btn-neutral float-right" href="utils.html" rel="next" title="Utils">Next <span aria-hidden="true" class="fa fa-arrow-circle-right"></span></a>
</div>
<hr/>
<div role="contentinfo">
<p>© Copyright 2019, Felix Soubelet.</p>
</div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
</div>
</div>
</section>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
<style>
         .wy-nav-content { max-width: 67.5%; }
  </style>
</body>
</html>